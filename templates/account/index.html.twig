{% extends 'base.html.twig' %}

{% block title %}Mon compte - GreenGoodies{% endblock %}

{% block body %}
  <section class="account">
    <h1>Mon compte</h1>

    <div class="account-actions">
      <form method="post" action="{{ path('app_account_toggle_api') }}">
        <button type="submit">
          {{ app.user.apiEnabled ? 'Désactiver mon accès API' : 'Activer mon accès API' }}
        </button>
      </form>

      <form method="post" action="{{ path('app_account_delete') }}" onsubmit="return confirm('Supprimer votre compte ? Cette action est irréversible.');">
        <input type="hidden" name="_token" value="">
        <button type="submit" class="danger">Supprimer mon compte</button>
      </form>
    </div>

    <h2>Mes commandes</h2>
    {% if orders is empty %}
      <p>Aucune commande pour le moment.</p>
    {% else %}
      <table class="orders">
        <thead>
          <tr>
            <th>N°</th>
            <th>Date</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          {% for order in orders %}
            <tr>
              <td>{{ order.number }}</td>
              <td>{{ order.createdAt|date('d/m/Y') }}</td>
              <td>{{ order.total }} €</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% endif %}
  </section>
{% endblock %}

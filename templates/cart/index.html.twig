{% extends 'base.html.twig' %}

{% block title %}Mon panier - GreenGoodies{% endblock %}

{% block body %}
  <section class="cart">
    <h1>Mon panier</h1>

    {% if items is empty %}
      <p>Votre panier est vide.</p>
    {% else %}
      <table class="cart-table">
        <thead>
          <tr>
            <th>Produit</th>
            <th>Quantité</th>
            <th>Prix unitaire</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          {% for item in items %}
            <tr>
              <td class="product-cell">
                <img src="{{ item.product.imagePath }}" alt="{{ item.product.name }}">
                <span>{{ item.product.name }}</span>
              </td>
              <td>{{ item.quantity }}</td>
              <td>{{ item.product.price }} €</td>
              <td>{{ (item.quantity * item.product.price)|number_format(2, '.', ' ') }} €</td>
            </tr>
          {% endfor %}
        </tbody>
        <tfoot>
          <tr>
            <th colspan="3">Total</th>
            <th>{{ total|number_format(2, '.', ' ') }} €</th>
          </tr>
        </tfoot>
      </table>

      <div class="cart-actions">
        <form method="post" action="{{ path('app_cart_clear') }}">
          <button type="submit" class="secondary">Vider le panier</button>
        </form>

        <form method="post" action="{{ path('app_cart_validate') }}">
          <button type="submit" class="primary">Valider la commande</button>
        </form>
      </div>
    {% endif %}
  </section>
{% endblock %}
